<UserControl x:Class="Calculator.MVVM.Views.Standard.KeyboardView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
             xmlns:local="clr-namespace:Calculator"
             DataContext="{Binding Source={StaticResource locator}, Path=KeyBoardViewModel}"
             mc:Ignorable="d"
             IsTabStop="True"
             Focusable="True"
             x:Name="keys"
             d:DesignHeight="450"
             d:DesignWidth="800">
    <UserControl.Resources>
        <!-- Number buttons style -->
        <Style x:Key="NumberButtonStyle" TargetType="Button" BasedOn="{StaticResource MaterialDesignRaisedButton}">
            <Setter Property="FontSize" Value="18" />
            <Setter Property="MinHeight" Value="64" />
            <Setter Property="MinWidth" Value="64" />
            <Setter Property="Margin" Value="8" />
            <Setter Property="Foreground" Value="#0F1724" />
            <Setter Property="Background" Value="#FFF4F7FA" />
            <Setter Property="FontWeight" Value="SemiBold" />
            <Setter Property="Padding" Value="8" />
            <Setter Property="materialDesign:ButtonAssist.CornerRadius" Value="12" />
            <Setter Property="Focusable" Value="False" />
        </Style>

        <!-- Operator buttons style -->
        <Style x:Key="OperatorButtonStyle" TargetType="Button" BasedOn="{StaticResource MaterialDesignRaisedButton}">
            <Setter Property="FontSize" Value="20" />
            <Setter Property="MinHeight" Value="64" />
            <Setter Property="MinWidth" Value="64" />
            <Setter Property="Margin" Value="8" />
            <Setter Property="Foreground" Value="White" />
            <Setter Property="Background" Value="#FF2A5298" />
            <Setter Property="FontWeight" Value="SemiBold" />
            <Setter Property="materialDesign:ButtonAssist.CornerRadius" Value="12" />
            <Setter Property="Focusable" Value="False" />
        </Style>

        <!-- Function buttons (AC, %, backspace) -->
        <Style x:Key="FunctionButtonStyle" TargetType="Button" BasedOn="{StaticResource MaterialDesignFlatButton}">
            <Setter Property="FontSize" Value="16" />
            <Setter Property="MinHeight" Value="56" />
            <Setter Property="MinWidth" Value="56" />
            <Setter Property="Margin" Value="8" />
            <Setter Property="Foreground" Value="#0F1724" />
            <Setter Property="Background" Value="#FFEFF6FA" />
            <Setter Property="materialDesign:ButtonAssist.CornerRadius" Value="10" />
            <Setter Property="Focusable" Value="False" />
        </Style>

    </UserControl.Resources>

    <UserControl.InputBindings>
        <!-- keep existing key bindings -->
        <KeyBinding CommandParameter="0"
                    Key="{x:Static Key.D0}"
                    Command="{Binding AddInputCommand}" />
        <KeyBinding CommandParameter="0"
                    Key="NumPad0"
                    Command="{Binding AddInputCommand}" />
        <KeyBinding CommandParameter="1"
                    Key="NumPad1"
                    Command="{Binding AddInputCommand}" />
        <KeyBinding CommandParameter="1"
                    Key="D1"
                    Command="{Binding AddInputCommand}" />
        <KeyBinding CommandParameter="2"
                    Key="D2"
                    Command="{Binding AddInputCommand}" />
        <KeyBinding CommandParameter="2"
                    Key="NumPad2"
                    Command="{Binding AddInputCommand}" />
        <KeyBinding CommandParameter="3"
                    Key="NumPad3"
                    Command="{Binding AddInputCommand}" />
        <KeyBinding CommandParameter="3"
                    Key="D3"
                    Command="{Binding AddInputCommand}" />
        <KeyBinding CommandParameter="4"
                    Key="NumPad4"
                    Command="{Binding AddInputCommand}" />
        <KeyBinding CommandParameter="4"
                    Key="D4"
                    Command="{Binding AddInputCommand}" />
        <KeyBinding CommandParameter="5"
                    Key="NumPad5"
                    Command="{Binding AddInputCommand}" />
        <KeyBinding CommandParameter="5"
                    Key="D5"
                    Command="{Binding AddInputCommand}" />
        <KeyBinding CommandParameter="6"
                    Key="NumPad6"
                    Command="{Binding AddInputCommand}" />
        <KeyBinding CommandParameter="6"
                    Key="D6"
                    Command="{Binding AddInputCommand}" />
        <KeyBinding CommandParameter="7"
                    Key="NumPad7"
                    Command="{Binding AddInputCommand}" />
        <KeyBinding CommandParameter="7"
                    Key="D7"
                    Command="{Binding AddInputCommand}" />
        <KeyBinding CommandParameter="8"
                    Key="NumPad8"
                    Command="{Binding AddInputCommand}" />
        <KeyBinding CommandParameter="8"
                    Key="D8"
                    Command="{Binding AddInputCommand}" />
        <KeyBinding CommandParameter="9"
                    Key="NumPad9"
                    Command="{Binding AddInputCommand}" />
        <KeyBinding CommandParameter="9"
                    Key="D9"
                    Command="{Binding AddInputCommand}" />
        <!--Special characters bindings-->
        <KeyBinding CommandParameter="+"
                    Key="Add"
                    Command="{Binding AddInputCommand}" />
        <KeyBinding CommandParameter="+"
                    Key="OemPlus"
                    Command="{Binding AddInputCommand}" />
        <KeyBinding CommandParameter="-"
                    Key="Subtract"
                    Command="{Binding AddInputCommand}" />
        <KeyBinding CommandParameter="-"
                    Key="OemMinus"
                    Command="{Binding AddInputCommand}" />
        <KeyBinding CommandParameter="*"
                    Key="Multiply"
                    Command="{Binding AddInputCommand}" />
        <KeyBinding CommandParameter="*"
                    Key="OemPlus"
                    Modifiers="Shift"
                    Command="{Binding AddInputCommand}" />
        <KeyBinding CommandParameter="/"
                    Key="Divide"
                    Command="{Binding AddInputCommand}" />
        <KeyBinding CommandParameter="/"
                    Key="{x:Static Key.D7}"
                    Command="{Binding AddInputCommand}"
                    Modifiers="Shift" />
        <KeyBinding CommandParameter="."
                    Key="Decimal"
                    Command="{Binding AddInputCommand}" />
        <KeyBinding CommandParameter="."
                    Key="OemPeriod"
                    Command="{Binding AddInputCommand}" />
        <KeyBinding 
                    Key="{x:Static Key.Back}"
                    Command="{Binding DeleteCommand}" />
        <KeyBinding Key="{x:Static Key.Delete}"
                    Command="{Binding DeleteAllCommand}" />

    </UserControl.InputBindings>

    <!-- Outer card for keyboard -->
    <Border Background="Transparent" Padding="12" materialDesign:ElevationAssist.Elevation="Dp4">
        <Border Background="#FFFFFFFF" CornerRadius="16" Padding="12" materialDesign:ElevationAssist.Elevation="Dp6">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition />
                    <RowDefinition />
                    <RowDefinition />
                    <RowDefinition />
                    <RowDefinition />
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition />
                    <ColumnDefinition />
                    <ColumnDefinition />
                    <ColumnDefinition />
                </Grid.ColumnDefinitions>

                <!-- Row 0 -->
                <Button  Grid.Row="0" Grid.Column="0" x:Name="ac" Content="AC" Command="{Binding DeleteAllCommand}" Style="{StaticResource FunctionButtonStyle}" />
                <Button  Grid.Row="0" Grid.Column="1" Command="{Binding AddInputCommand}" CommandParameter="%" Style="{StaticResource FunctionButtonStyle}">
                    <materialDesign:PackIcon Kind="Percent" />
                </Button>
                <Button  Grid.Row="0" Grid.Column="2" Command="{Binding DeleteCommand}" Style="{StaticResource FunctionButtonStyle}">
                    <materialDesign:PackIcon Kind="BackspaceOutline" />
                </Button>

                <Button  Grid.Row="0" Grid.Column="3" Command="{Binding AddInputCommand}" CommandParameter="/" Style="{StaticResource OperatorButtonStyle}">
                    <materialDesign:PackIcon Kind="Division" />
                </Button>

                <!-- Row 1 -->
                <Button  Grid.Row="1" Grid.Column="0" Content="7" Command="{Binding AddInputCommand}" CommandParameter="7" Style="{StaticResource NumberButtonStyle}" />
                <Button  Grid.Row="1" Grid.Column="1" Content="8" Command="{Binding AddInputCommand}" CommandParameter="8" Style="{StaticResource NumberButtonStyle}" />
                <Button  Grid.Row="1" Grid.Column="2" Content="9" Command="{Binding AddInputCommand}" CommandParameter="9" Style="{StaticResource NumberButtonStyle}" />
                <Button  Grid.Row="1" Grid.Column="3" Command="{Binding AddInputCommand}" CommandParameter="*" Style="{StaticResource OperatorButtonStyle}">
                    <materialDesign:PackIcon Kind="Multiplication" />
                </Button>

                <!-- Row 2 -->
                <Button  Grid.Row="2" Grid.Column="0" Content="4" Command="{Binding AddInputCommand}" CommandParameter="4" Style="{StaticResource NumberButtonStyle}" />
                <Button  Grid.Row="2" Grid.Column="1" Content="5" Command="{Binding AddInputCommand}" CommandParameter="5" Style="{StaticResource NumberButtonStyle}" />
                <Button  Grid.Row="2" Grid.Column="2" Content="6" Command="{Binding AddInputCommand}" CommandParameter="6" Style="{StaticResource NumberButtonStyle}" />
                <Button  Grid.Row="2" Grid.Column="3" Content="-" Command="{Binding AddInputCommand}" CommandParameter="-" Style="{StaticResource OperatorButtonStyle}" />

                <!-- Row 3 -->
                <Button  Grid.Row="3" Grid.Column="0" Content="1" Command="{Binding AddInputCommand}" CommandParameter="1" Style="{StaticResource NumberButtonStyle}" />
                <Button  Grid.Row="3" Grid.Column="1" Content="2" Command="{Binding AddInputCommand}" CommandParameter="2" Style="{StaticResource NumberButtonStyle}" />
                <Button  Grid.Row="3" Grid.Column="2" Content="3" Command="{Binding AddInputCommand}" CommandParameter="3" Style="{StaticResource NumberButtonStyle}" />
                <Button  Grid.Row="3" Grid.Column="3" Content="+" Command="{Binding AddInputCommand}" CommandParameter="+" Style="{StaticResource OperatorButtonStyle}" />

                <!-- Row 4 -->
                <Button  Grid.Row="4" Grid.Column="0" Content="00" Command="{Binding AddInputCommand}" CommandParameter="00" Style="{StaticResource NumberButtonStyle}" />
                <Button  Grid.Row="4" Grid.Column="1" Content="0" Command="{Binding AddInputCommand}" CommandParameter="0" Style="{StaticResource NumberButtonStyle}" />
                <Button  Grid.Row="4" Grid.Column="2" Content="." Command="{Binding AddInputCommand}" CommandParameter="." Style="{StaticResource NumberButtonStyle}" />
                <Button  Grid.Row="4" Grid.Column="3" Content="=" ToolTip="Enter" x:Name="enter" IsDefault="True" Command="{Binding ResultCommand}" Style="{StaticResource OperatorButtonStyle}" />

            </Grid>
        </Border>
    </Border>
</UserControl>
